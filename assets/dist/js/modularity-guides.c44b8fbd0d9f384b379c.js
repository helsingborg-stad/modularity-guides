!function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}(function(){var e=".js-modularity-guide-todos",n="data-js-modularity-guide-post-url",o={info:"c-notice--info",success:"c-notice--success",danger:"c-notice--danger",warning:"c-notice--warning"};function i(i){var r,l;i.preventDefault();var a,u,c,d=i.target,s=null==d?void 0:d.closest(e),g=null==d||null===(r=d.querySelector('input[name="email"]'))||void 0===r?void 0:r.value,f=null==s||null===(l=s.closest("[".concat(n,"]")))||void 0===l?void 0:l.getAttribute(n);function v(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=null==s?void 0:s.querySelector(".js-modularity-guide-todos__notice"),a=null==l?void 0:l.querySelectorAll("c-icon"),u=null==l?void 0:l.classList,c=o[i];if("boolean"!=typeof e||!1!==e){if(!u||!c||null!=u&&u.contains(c)||((n=u,function(e){if(Array.isArray(e))return t(e)}(n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter(function(t){return Object.values(o).includes(t)}).forEach(function(t){null==u||u.remove(t)}),null==u||u.add(c)),"string"==typeof e&&e.length>0){var d,g=Array.from(null!==(d=null==l?void 0:l.querySelectorAll("span"))&&void 0!==d?d:[]);(2===g.length?g[1]:g[0]).innerHTML=e,r.length>0&&a&&a.forEach(function(t){return t.innerHTML=r}),null==u||u.remove("u-display--none")}}else null!=u&&u.contains("u-display--none")||null==u||u.add("u-display--none")}if(console.log("API URL",f),v(!1),s&&g&&f){null==s||s.classList.toggle("is-loading");var y={action:"email_todo",checklist:(c=[],null==(a=s)||null===(u=a.querySelectorAll("[data-mod-guide-toggle-key-content]"))||void 0===u||u.forEach(function(t){var e;t.checkVisibility()&&c.push(null!==(e=t.getAttribute("data-mod-guide-toggle-key-content"))&&void 0!==e?e:"")}),c),email:g};fetch(f,{method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(y)}).then(function(t){null==s||s.classList.toggle("is-loading"),t.json().then(function(t){t?(null==s||s.classList.toggle("is-loading"),v(guides.email_sent,"success","report"),setTimeout(function(){v(!1);var t=null==s?void 0:s.querySelector(".js-modularity-guide-todos__modal .c-modal__close");null==t||t.click()},2e3)):v(guides.email_failed,"danger","report")})}).catch(function(t){console.log(JSON.stringify(t))})}}window.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll(e);(null==t?void 0:t.length)>0&&t.forEach(function(t){!function(t){var e;null==t||null===(e=t.querySelector(".js-modularity-guide-todos__form"))||void 0===e||e.addEventListener("submit",i)}(t)})})})(),function(t){function e(){this.handleEvents(),this.contentToggleEngine()}e.prototype.handleEvents=function(){t('input[type="checkbox"][data-mod-guide-relation]').on("change",function(){var e=t(this).data("mod-guide-relation");e=e.split(","),t.each(e,function(e,n){var o=t('input[type="checkbox"][data-mod-guide-toggle-key="'+n+'"]');o.prop("checked",!o.prop("checked")).trigger("change")})}),t("[data-mod-guide-toggle-key]").on("change",function(){this.contentToggleEngine()}.bind(this))},e.prototype.contentToggleEngine=function(){var e=[];t("[data-mod-guide-toggle-key]").each(function(n,o){!0===t(o).prop("checked")&&e.push(t(o).attr("data-mod-guide-toggle-key"))}),t("[data-mod-guide-todo-widget]").each(function(e,n){return t(n).hide()}),t("[data-mod-guide-toggle-key-content]").each(function(n,o){var i=!1,r=t(o).attr("data-mod-guide-toggle-key-content");if(r=r.split(","),t.each(r,function(t,n){var o=n.match(/(^|\+)([^+-]+)/g),r=new RegExp("\\b("+(null==o?void 0:o.join("|").replace("+",""))+")\\b","ig"),l=e.join(",").match(r),a=null!==l&&l.length===(null==o?void 0:o.length),u=n.match(/-([^+-]+)/g),c=!0;if(null!==u){var d=new RegExp("\\b("+u.join("|").replace("-","")+")\\b","ig"),s=e.join(",").match(d);c=!(null!==s&&s.length>0)}a&&c&&(i=!0)}),i)return t(o).show(),t(o).closest("tr").show(),void t(o).closest("[data-mod-guide-todo-widget]").show();t(o).hide(),t(o).closest("tr").hide()})},new e}(jQuery);var o=".js-modularity-guide",i=".js-modularity-guide__section",r=".js-modularity-guide__next",l="data-guide-step";function a(t){var e;t.preventDefault();var n=t.target,a=null==n?void 0:n.classList.contains(r.substring(1)),u=null==n?void 0:n.closest(o),c=null==n?void 0:n.closest(i),d=parseInt(null!==(e=null==c?void 0:c.getAttribute(l))&&void 0!==e?e:"-1");if(d>0){var s=a?d+1:d-1,g=null==u?void 0:u.querySelector("[".concat(l,'="').concat(s,'"]')),f=null==g?void 0:g.querySelector("[js-expand-button]");f&&f.click()}}function u(t){var n=[].concat(e(t.querySelectorAll("".concat(i," ").concat(r))),e(t.querySelectorAll("".concat(i," ").concat(".js-modularity-guide__prev"))));n.length>0&&n.forEach(function(t){t.addEventListener("click",a)})}window.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll(o);t&&t.length>0&&t.forEach(u)})}();
//# sourceMappingURL=modularity-guides.c44b8fbd0d9f384b379c.js.map